'use strict';Object.defineProperty(exports,'__esModule',{value:true});const product_model_1=require('../models/product-model');const database_manager_1=require('../database/database-manager');const express=require('express');class App{constructor(){this.port=8976;this.expressApp=express();this.db=new database_manager_1.DbManager();this.init();}getProduct(barcode){let sql=`SELECT games.* FROM games, product_edition AS edition WHERE edition.barcode='${barcode}' AND games.id = edition.game_id`;this.db.dbQuery(sql).then(dbRes=>{for(let i=0;i<dbRes.result.rowCount();i++){let row=dbRes.result.dataRows[i];console.log('ROW:',row);}}).catch(error=>{console.log('ERROR:',error);});console.log('App started');}init(){this.getProduct('045496590444');let model=new product_model_1.ProductModel('Kalle','0345034543','http://www.kalle.com/d.jpg');this.expressApp.get('/api/offer',(req,res)=>{res.json(model);});this.expressApp.listen(this.port);console.log(`Listening on localhost: ${this.port}`);}}exports.App=App;let app=new App();