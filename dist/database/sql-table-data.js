'use strict';Object.defineProperty(exports,'__esModule',{value:true});const sql_table_data_row_1=require('./sql-table-data-row');const sql_data_column_1=require('./sql-data-column');class SQLTableData{constructor(){this.fieldTypes={};this.dataRows=Array();}rowCount(){return this.dataRows!=null?this.dataRows.length:0;}parseFields(fields){for(let index in fields){let obj=fields[index];let name='';let type='';for(let prop in obj){if(obj.hasOwnProperty(prop)){if(prop==='name')name=obj[prop];if(prop==='type')type=obj[prop];}}this.fieldTypes[name]=Number(type);}}addRow(){let newRow=new sql_table_data_row_1.SQLTableDataRow();this.dataRows.push(newRow);return newRow;}pushRow(row){this.dataRows.push(row);}safeGetFirstRow(){let result=this.dataRows[0];if(result==null){result=new sql_table_data_row_1.SQLTableDataRow();}return result;}getFirstRow(){return this.dataRows[0];}parseRowCollection(dataRows){function parseRow(dataRow,dbDataRow){for(let cell in dataRow){if(dataRow.hasOwnProperty(cell)){let rowObj=dataRow[cell];dbDataRow.columns.push(new sql_data_column_1.SQLDataColumn(cell,rowObj));}}}for(let i=0;i<dataRows.length;i++){let row=dataRows[i];let dbDataRow=this.addRow();parseRow(row,dbDataRow);}}parseResultSet(dataRows,dataFields){return new Promise((resolve,reject)=>{try{this.parseFields(dataFields);this.parseRowCollection(dataRows);}catch(e){reject(e);}resolve(this);});}toString(){let result='';return result;}}exports.SQLTableData=SQLTableData;