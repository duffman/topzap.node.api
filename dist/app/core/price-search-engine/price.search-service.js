'use strict';Object.defineProperty(exports,'__esModule',{value:true});const request=require('request');const cli_logger_1=require('../../cli/cli.logger');const zappy_app_settings_1=require('../../zappy.app.settings');const phttp_client_1=require('../../../lib/putte-ts/inet/phttp-client');class PriceSearchService{constructor(){}doDebugSearch(code){cli_logger_1.Logger.logYellow('** DoDebugSearch ::');const debugResult='{"highOffer":0,"vendors":[{"vendorId":12,"accepted":true,"title":"Adventure Time: Pirates of the Enchiridion for Nintendo Switch","offer":"2.85","rawData":null},{"vendorId":11,"accepted":true,"title":"Adventure Time: Pirates of the","offer":"15","rawData":null},{"vendorId":15,"accepted":true,"title":"Adventure Time: Pirates of the Enchiridion for Nintendo Switch","offer":"0.05","rawData":null},{"vendorId":13,"accepted":true,"title":"Adventure Time: Pirates of the Enchiridion","offer":"0.88","rawData":null}]}';return new Promise((resolve,reject)=>{resolve(debugResult);});}doSearch(code){let url=zappy_app_settings_1.Settings.PriceServiceApi.Endpoint+'/'+code;return new Promise((resolve,reject)=>{phttp_client_1.PHttpClient.getHttp(url).then(res=>{cli_logger_1.Logger.logGreen('PriceSearchService :: doSearch :: success ::',res);resolve(res);}).catch(err=>{cli_logger_1.Logger.logGreen('PriceSearchService :: doSearch :: error ::',err);reject(err);});});}doSearch2(code,useProxy=false){let payload={code:code,ext:false};let options={uri:zappy_app_settings_1.Settings.PriceServiceApi.Endpoint,headers:{'User-Agent':'zapStorm/36.3','Content-Type':'application/json','Accept':'application/json'}};let scope=this;return new Promise((resolve,reject)=>{return request.post(zappy_app_settings_1.Settings.PriceServiceApi.Endpoint,options,{payload},(error,response,body)=>{if(!error&&response.statusCode==200){cli_logger_1.Logger.logGreen('Success',body);resolve(body);}else{cli_logger_1.Logger.logError('PostRequest :: Error',error);reject(error);}});});}}exports.PriceSearchService=PriceSearchService;